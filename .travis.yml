language: ruby
env:
    global:
        # - secure: WKY98PaxxLPud88qStM4s5EY+w7gj9abYkirZXXECqyOE2tIOa5dB4/hQS413nn/i7NoYLWkWR2l7lLklW2bjl1aSFVvmAPEDdof28rgELsMIUQO2j1wD1eoxLFo1FQUhW+paZczc5qqz0yjFCw4XEVDmm/ymjUXKWqvDQB0ZORvw6Y4fFvzs1vC8x/ZvnEtSERCLBw8CLguJxRf88LNhHV+Un87IyI/w9fchLx39Xe3McNCy3AqywtS2alLjkcYF0NhqryBAhEMEhjgUItIDdz40e8vZpGO0eH0k0/G8sqMBoXJXieNxYUeYRvpyAqEil2EJbNf8EppooaVFpRUZgtnARe1cdFNO1pe3V+rTu2bwaBHoC1WJDa2rntcnVhCLf0LZrPFE1pWPVQYFlNaFd3WDD+mMM92iPg/S1+jrbNoWxcwWJU+np3LFClzqWKtzl0EE7nRxP1D4QXSXyRDj/EdojG1TksiqIoQIG7e0KMn/vFALlGDlAHuUFpmaOYTLJ7ngElm8Dq2OVhojbCyecJXGhsB2RAgYyDO5ofsQP/8DfFxQ9MfElFBlcx8TrIzyg+N8uJe/2tY8Ti1kPGoMDeQQnr/dFuvYJYMU7CTeiPKkUvbOby7HdJYUEl8DMe20gqBOwVJMDmGy9e1R+NNeUb1JU8lZ6yeATrG9SGVzGs=
        - GH_OWNER=Haroenv
        - GH_PROJECT_NAME=bus
script:
    # - gem install
    - jekyll build
after_success:
    # Any command that using GH_OAUTH_TOKEN must pipe the output to /dev/null to not expose your oauth token
    - git submodule add -b gh-pages https://${GH_OAUTH_TOKEN}@github.com/${GH_OWNER}/${GH_PROJECT_NAME} site > /dev/null 2>&1
    - cd site
    - if git checkout gh-pages; then git checkout -b gh-pages; fi
    - git rm -r .
    - cp -R ../_site/* .
    - cp ../_site/.* .
    - git add -f .
    - git config user.email "hello@haroen.me"
    - git config user.name "Haroen Viaene (bot)"
    - git commit -am "built via travis [ci skip]"
    # Any command that using GH_OAUTH_TOKEN must pipe the output to /dev/null to not expose your oauth token
    - git push https://${GH_OAUTH_TOKEN}@github.com/${GH_OWNER}/${GH_PROJECT_NAME} HEAD:gh-pages > /dev/null 2>&1
